{"version":3,"sources":["../../src/lib/Statix.js"],"names":[],"mappings":";;;;;;AAAA,IAAI,OAAO,QAAQ,MAAR,CAAX;;IAEM,M;AACF,oBAAY,aAAZ,EAA2B;AAAA;;AACvB,aAAK,iBAAL,CAAuB,aAAvB;AACH;;;;0CAEiB,a,EAAe;AAC7B,iBAAK,OAAL,GAAe,cAAc,OAA7B;AACA,iBAAK,MAAL,GAAc,aAAd;AACA,iBAAK,MAAL,CAAY,SAAZ,GAAwB,KAAK,SAAL,CAAkB,SAAlB,wBAAxB;AACA,iBAAK,MAAL,CAAY,cAAZ,GAA6B,KAAK,SAAL,CAAkB,SAAlB,uBAA7B;AACH;;;oCAEW,O,EAAS;AACjB,gBAAI,SAAS,QAAQ,MAAR,GAAiB,CAA9B;AACA,gBAAI,iBAAiB,CAArB;;AAEA,mBAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AACzC,oBAAI,iBAAiB,SAAjB,cAAiB,GAAW;AAC5B,wBAAI,iBAAiB,MAArB,EAA6B;AACzB;AACA;AACH,qBAHD,MAGO;AACH;AACH;AACJ,iBAPD;;AASA,oBAAI,MAAM,YAAY;AAClB,wBAAI,MAAM,OAAN,CAAc,QAAQ,cAAR,CAAd,MAA2C,IAA/C,EAAqD;AACjD,6BAAK,WAAL,CAAiB,QAAQ,cAAR,CAAjB,EAA0C,IAA1C,CAA+C,YAAM;AACjD;AACH,yBAFD;AAGH,qBAJD,MAIO;AACH,gCAAQ,cAAR,EAAwB,eAAxB,CAAwC,KAAK,MAAL,CAAY,YAApD;AACA,gCAAQ,cAAR,EAAwB,oBAAxB,CAA6C,KAAK,MAAL,CAAY,SAAzD;AACA,gCAAQ,cAAR,EAAwB,GAAxB,GAA8B,IAA9B,CAAmC,YAAM;AACrC;AACH,yBAFD;AAGH;AACJ,iBAZS,CAYR,IAZQ,CAYH,IAZG,CAAV;;AAcA;AAEH,aA1BkB,CA0BjB,IA1BiB,CA0BZ,IA1BY,CAAZ,CAAP;AA2BH;;;6CAEoB,I,EAAM;AACvB,mBAAO,IAAI,OAAJ,CAAY,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AACzC,qBAAK,WAAL,CAAiB,KAAK,OAAtB,EAA+B,IAA/B,CAAoC,YAAM;AACtC;AACH,iBAFD;AAGH,aAJkB,CAIjB,IAJiB,CAIZ,IAJY,CAAZ,CAAP;AAKH;;;qCAEY;AACT,oBAAQ,GAAR,CAAY,qBAAZ;AACA,mBAAO,KAAK,oBAAL,CAA0B,KAAK,MAAL,CAAY,SAAtC,CAAP;AACH;;;0CAEiB,CAEjB;;;0CAEiB;AACd,oBAAQ,GAAR,CAAY,kBAAZ;AACH;;;iCAEQ;AAAA;;AACL,oBAAQ,GAAR,CAAY,mBAAZ;;AAEA,iBAAK,UAAL,GAAkB,IAAlB,CAAuB,YAAM;AACzB,sBAAK,eAAL;AACH,aAFD;AAGH;;;gCAEO;AACJ,oBAAQ,GAAR,CAAY,kBAAZ;AACH;;;;;;AAGL,OAAO,OAAP,GAAiB,MAAjB","file":"Statix.js","sourcesContent":["var path = require('path');\n\nclass Statix {\n    constructor(configuration) {\n        this._setConfiguration(configuration);\n    }\n\n    _setConfiguration(configuration) {\n        this.plugins = configuration.plugins;\n        this.config = configuration;\n        this.config.tmpFolder = path.normalize(`${__dirname}/../../.server-tmp`);\n        this.config.buildTmpFolder = path.normalize(`${__dirname}/../../.build-tmp`);\n    }\n\n    _runPlugins(plugins) {\n        var length = plugins.length - 1;\n        var currentRunning = 0;\n\n        return new Promise(function(resolve, reject) {\n            var handleAfterRun = function() {\n                if (currentRunning < length) {\n                    currentRunning ++;\n                    run();\n                } else {\n                    resolve();\n                }\n            };\n\n            var run = function () {\n                if (Array.isArray(plugins[currentRunning]) === true) {\n                    this._runPlugins(plugins[currentRunning]).then(() => {\n                        handleAfterRun();\n                    });\n                } else {\n                    plugins[currentRunning].setSourceFolder(this.config.sourceFolder);\n                    plugins[currentRunning].setDestinationFolder(this.config.tmpFolder);\n                    plugins[currentRunning].run().then(() => {\n                        handleAfterRun();\n                    });\n                }\n            }.bind(this);\n\n            run();\n\n        }.bind(this));\n    }\n\n    _tmpFolderGeneration(path) {\n        return new Promise(function(resolve, reject) {\n            this._runPlugins(this.plugins).then(() => {\n                resolve();\n            });\n        }.bind(this));\n    }\n\n    _createTmp() {\n        console.log('creating tmp folder');\n        return this._tmpFolderGeneration(this.config.tmpFolder);\n    }\n\n    _createBuildTmp() {\n\n    }\n\n    _initiateServer() {\n        console.log('server initiated')\n    }\n\n    server() {\n        console.log('initiating server');\n\n        this._createTmp().then(() => {\n            this._initiateServer();\n        });\n    }\n\n    build() {\n        console.log('initiating build');\n    }\n}\n\nmodule.exports = Statix;"]}